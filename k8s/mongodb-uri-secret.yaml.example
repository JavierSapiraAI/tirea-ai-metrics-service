# MongoDB URI Secret Template
#
# This is a template file for creating the MongoDB secret required by the
# ground-truth-export CronJob. DO NOT commit the actual secret to git.
#
# Instructions:
#   1. Copy this file to mongodb-uri-secret.yaml
#   2. Replace YOUR_MONGODB_URI_HERE with the actual MongoDB connection string
#   3. Apply the secret: kubectl apply -f mongodb-uri-secret.yaml
#   4. Add mongodb-uri-secret.yaml to .gitignore
#
# To create the secret from command line (alternative method):
#   kubectl create secret generic mongodb-uri-secret \
#     --from-literal=uri="mongodb+srv://user:password@cluster.mongodb.net/database" \
#     --namespace=langfuse
#
# To view the secret (for verification):
#   kubectl get secret mongodb-uri-secret -n langfuse -o yaml
#
# To delete the secret:
#   kubectl delete secret mongodb-uri-secret -n langfuse

apiVersion: v1
kind: Secret
metadata:
  name: mongodb-uri-secret
  namespace: langfuse
  labels:
    app: ground-truth-export
    component: data-pipeline
    managed-by: langfuse-backoffice
type: Opaque
stringData:
  # MongoDB connection string
  # Format: mongodb+srv://username:password@host/database?options
  # Example: mongodb+srv://tirea:mypassword@cluster0.mongodb.net/tirea-doc-hub?retryWrites=true&w=majority
  uri: "YOUR_MONGODB_URI_HERE"

---
# Alternative: Use External Secrets Operator (ESO) to sync from AWS Secrets Manager
# This is more secure for production environments
#
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: mongodb-uri-secret
#   namespace: langfuse
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: SecretStore
#   target:
#     name: mongodb-uri-secret
#     creationPolicy: Owner
#   data:
#   - secretKey: uri
#     remoteRef:
#       key: tirea-ai/mongodb-uri
#       property: connection_string
